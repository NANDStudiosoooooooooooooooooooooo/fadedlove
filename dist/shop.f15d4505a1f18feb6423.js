(()=>{"use strict";function e(){var e=document.getElementById("label-toggle");document.querySelectorAll(".info").forEach((function(n){e.checked?n.classList.remove("hidden"):n.classList.add("hidden")}))}function n(e){var n='\n{\n    collectionByHandle(handle: "'.concat(e,'") {\n        id\n        title\n        image {\n            src\n        }\n        metafields(identifiers: [\n            {namespace: "custom", key: "dropend"},\n            {namespace: "custom", key: "isdrop"}\n        ]) {\n            namespace\n            key\n            value\n            type\n        }\n    }\n}');console.log("Lade Collection: ".concat(e)),fetch("https://zkwisj-0b.myshopify.com/api/2024-10/graphql.json",{method:"POST",headers:{"Content-Type":"application/json","X-Shopify-Storefront-Access-Token":"ed72f09d8742f37356305b6e49310909"},body:JSON.stringify({query:n})}).then((function(e){return e.json()})).then((function(e){var n,t=null===(n=e.data)||void 0===n?void 0:n.collectionByHandle;if(t){var o,a=null===(o=t.image)||void 0===o?void 0:o.src,c=document.getElementById("collection-img");c&&a&&(c.src=a,c.classList.remove("hidden"));var i=t.metafields;if(i&&Array.isArray(i)){var d,l,r=null===(d=i.find((function(e){return"dropend"===e.key})))||void 0===d?void 0:d.value;r&&function(e){var n=document.getElementById("countdown"),t=new Date(e).getTime();if(isNaN(t))return;n.classList.remove("hidden");var o=setInterval((function(){var e=(new Date).getTime(),a=t-e;if(a<=0)clearInterval(o),n.textContent="DROP EXPIRED";else{var c=Math.floor(a/864e5),i=Math.floor(a%864e5/36e5),d=Math.floor(a%36e5/6e4),l=Math.floor(a%6e4/1e3);n.textContent="".concat(c<10?"0":"").concat(c,":").concat(i<10?"0":"").concat(i,":").concat(d<10?"0":"").concat(d,":").concat(l<10?"0":"").concat(l)}}),1e3)}(r);var s=document.getElementById("collection-name");if(s&&(s.textContent=t.title,s.classList.remove("hidden")),"true"===(null===(l=i.find((function(e){return"isdrop"===e.key})))||void 0===l?void 0:l.value)){var f=document.getElementById("button5");f&&f.classList.remove("hidden")}}}else console.error("NO COLLECTION / DROP")})).catch((function(e){return console.error("ERROR (LOADING COLLECTION-DATA):",e)}))}document.addEventListener("DOMContentLoaded",(function(){var t=function(){var e=new URLSearchParams(window.location.search),n=e.get("collection")?e.get("collection").toLowerCase():"all",t=e.get("drop")?e.get("drop").toLowerCase():"all";return{collection:n,hide:"TRUE"===e.get("hide"),drop:t}}(),o=t.collection,a=t.hide,c=t.drop;document.getElementById("label-toggle").checked=!a,document.getElementById("label-toggle").addEventListener("change",e),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";fetch("https://zkwisj-0b.myshopify.com/api/2023-10/graphql.json",{method:"POST",headers:{"Content-Type":"application/json","X-Shopify-Storefront-Access-Token":"all"===n&&"all"===t?"ed72f09d8742f37356305b6e49310909":"26ddd765a66157f6946c55e9dded479a"},body:JSON.stringify({query:'\n{\n    products(first: 100) {\n        edges {\n            node {\n                id\n                title\n                handle\n                images(first: 1) {\n                    edges {\n                        node {\n                            src\n                        }\n                    }\n                }\n                variants(first: 1) {\n                    edges {\n                        node {\n                            price {\n                                amount\n                            }\n                            metafields(identifiers: [\n                                {namespace: "custom", key: "colorhex"}\n                            ]) {\n                                key\n                                value\n                            }\n                        }\n                    }\n                }\n                tags\n            }\n        }\n    }\n}'})}).then((function(e){return e.json()})).then((function(o){if(o.data&&o.data.products){var a=o.data.products.edges.map((function(e){return e.node})),c=document.getElementById("shop-container"),i=document.createElement("div");i.classList.add("mainshop-items");var d=!1;if(a.forEach((function(e){var o=e.tags.map((function(e){return e.toLowerCase()}));if(!o.includes("hide")){var a="all"===n||o.includes(n.toLowerCase()),c="all"===t||o.includes(t.toLowerCase());if(a&&c){d=!0;var l=document.createElement("div");l.classList.add("mainshop-item");var r=e.handle;l.onclick=function(){return window.location.href="https://fadedcloth.de/item?item=".concat(r)};var s=e.images.edges.length>0?e.images.edges[0].node.src:"fallback-image.jpg",f=e.variants.edges[0].node.price.amount,u=e.variants.edges[0].node.metafields.find((function(e){return"colorhex"===e.key})),m=u?u.value:"#ffffff",v=/^#[0-9A-Fa-f]{6}$/.test(m)?m:"#ffffff";l.innerHTML='\n                    <div style="height: 100%;">\n                        <div style="background-color: '.concat(v,';" class="blurred-eclipse-background"></div>\n                        <img src="').concat(s,'" class="floating" alt="').concat(e.title,'">\n                    </div>\n                    <div class="info">\n                        <div class="name">').concat(e.title,'</div>\n                        <div class="price">').concat(f," EUR</div>\n                    </div>\n                "),i.appendChild(l)}}})),c.innerHTML="",d)c.appendChild(i);else{var l=document.createElement("a");l.classList.add("headline"),l.textContent="NO ITEMS FOUND.",c.appendChild(l)}e()}else console.error("API ERROR")})).catch((function(e){console.error("ERROR (LOADING PRODUCTS):",e)}))}(o,c),n(o)}))})();