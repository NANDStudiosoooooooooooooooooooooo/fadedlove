<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>FADEDCLOTH</title>
    <link rel="stylesheet" href="styles/index4.css">
</head>
<body>
    <div id="loader" class="loader-container">
        <l-zoomies size="80" stroke="5" bg-opacity="0.1" speed="1.4" color="white"></l-zoomies>
    </div>

    <div class="logo-container" id="load-container">
        <video class="logo" id="load-obj" autoplay loop muted playsinline>
            <source src="media/logo.mp4" type="video/mp4">
            Dein Browser unterst√ºtzt dieses Video nicht.
        </video>
    </div>

    <div id="threejs-container" class="hidden logo-container"></div>

    <!-- Navigation link -->
    <a href="https://fadedcloth.de/shop" class="nav-link top-left underlineonhover">SHOP</a>

    <div class="switch-container">
        <span class="switch-label" id="switch-label">3D</span>
        <div id="toggle-switch" class="glass-switch">
            <div class="glass-switch-circle"></div>
        </div>
    </div>

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- GLTF Loader for loading .glb/.gltf models -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <!-- OrbitControls for interactivity -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <script>
        let scene, camera, renderer, model;
    
        function initThreeJS() {
            const container = document.getElementById('threejs-container');
    
            // Set up the scene
            scene = new THREE.Scene();
    
            // Set up the camera (PerspectiveCamera with field of view, aspect ratio, near, far)
            camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.set(0, 1, 5); // Adjust camera position if needed
    
            // Set up the renderer and append it to the container
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            container.appendChild(renderer.domElement);
    
            // Add lighting to the scene
            const ambientLight = new THREE.AmbientLight(0xffffff, 1);
            scene.add(ambientLight);
    
            // Load the 3D model using GLTFLoader
            const loader = new THREE.GLTFLoader();
            loader.load('media/PRODUCTS/3d1.glb', function(gltf) {
                model = gltf.scene;
                scene.add(model);
    
                // Optional: Adjust model size and position
                model.scale.set(1, 1, 1); // Change if model is too big/small
                model.position.set(0, 0, 0); // Position it at the center
    
                animate();
            }, undefined, function(error) {
                console.error('Error loading 3D model:', error);
            });
    
            // Handle window resizing
            window.addEventListener('resize', onWindowResize, false);
        }
    
        // Adjust rendering when the window is resized
        function onWindowResize() {
            const container = document.getElementById('threejs-container');
            camera.aspect = container.clientWidth / container.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(container.clientWidth, container.clientHeight);
        }
    
        // Animation loop
        function animate() {
            requestAnimationFrame(animate);
    
            // Optional: Rotate model for a dynamic effect
            if (model) {
                model.rotation.y += 0.01;
            }
    
            renderer.render(scene, camera);
        }
    
        // Initialize Three.js when the switch is activated
        document.getElementById("toggle-switch").addEventListener("click", function() {
            const videoContainer = document.getElementById("load-obj");
            const threejsContainer = document.getElementById("threejs-container");
    
            if (threejsContainer.classList.contains("hidden")) {
                videoContainer.classList.add("hidden");
                threejsContainer.classList.remove("hidden");
    
                // Initialize the 3D scene only if it's not already initialized
                if (!renderer) {
                    initThreeJS();
                }
            } else {
                threejsContainer.classList.add("hidden");
                videoContainer.classList.remove("hidden");
            }
        });
    </script>
    
    <script src="scripts/loader.js"></script>
    <script src="scripts/load-button.js"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/ldrs/dist/auto/zoomies.js"></script>
    <!--<script src="https://subscribe.fadedcloth.de/scripts/fadedsub.js"></script>
        <script src="scripts/sendsms.js"></script>
    <script src="https://subscribe.fadedcloth.de/scripts/fadedsendunsub.js"></script>-->
</body>
</html>